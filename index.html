<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>پیش‌بینی قیمت خودرو - CatBoost</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap');
    body {
      font-family: 'Vazirmatn', sans-serif;
      overflow-x: hidden;
    }
    
    .progress-bar {
      height: 10px;
      border-radius: 5px;
      background: linear-gradient(to right, #ef4444, #f59e0b, #10b981, #3b82f6);
    }
    
    .metric-card {
      transition: all 0.3s ease;
    }
    
    .metric-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }
    
    /* استایل‌های انیمیشن پردازش - نسخه ساده و شیک */
    .processing-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(15, 23, 42, 0.95);
      z-index: 9999;
      display: none;
      overflow: hidden;
    }
    
    .processing-center {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 3;
      text-align: center;
      width: 90%;
      max-width: 500px;
    }
    
    .loader-container {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
    }
    
    .loader {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .loader-ring {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 3px solid transparent;
      animation: rotate 1.5s linear infinite;
    }
    
    .loader-ring-1 {
      border-top: 3px solid #3b82f6;
    }
    
    .loader-ring-2 {
      border-right: 3px solid #10b981;
      animation-delay: 0.3s;
    }
    
    .loader-ring-3 {
      border-bottom: 3px solid #f59e0b;
      animation-delay: 0.6s;
    }
    
    .loader-core {
      width: 40px;
      height: 40px;
      background: #8b5cf6;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-size: 20px;
      z-index: 2;
    }
    
    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .progress-dots {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 20px 0;
    }
    
    .progress-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      animation: pulse 1.5s infinite ease-in-out;
    }
    
    .progress-dot:nth-child(1) { animation-delay: 0s; }
    .progress-dot:nth-child(2) { animation-delay: 0.3s; }
    .progress-dot:nth-child(3) { animation-delay: 0.6s; }
    .progress-dot:nth-child(4) { animation-delay: 0.9s; }
    .progress-dot:nth-child(5) { animation-delay: 1.2s; }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); background: rgba(255, 255, 255, 0.3); }
      50% { transform: scale(1.5); background: rgba(59, 130, 246, 0.8); }
    }
    
    .car-info-badge {
      display: inline-block;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.3);
      padding: 8px 20px;
      border-radius: 50px;
      margin: 20px 0;
      font-size: 16px;
      color: #e2e8f0;
      backdrop-filter: blur(10px);
    }
    
    .processing-steps {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-top: 30px;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .processing-step {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 12px 20px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      border-right: 3px solid transparent;
      transition: all 0.3s ease;
    }
    
    .processing-step.active {
      background: rgba(59, 130, 246, 0.1);
      border-right-color: #3b82f6;
    }
    
    .step-icon {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      background: rgba(255, 255, 255, 0.1);
      color: #94a3b8;
    }
    
    .processing-step.active .step-icon {
      background: rgba(59, 130, 246, 0.2);
      color: #3b82f6;
    }
    
    .step-text {
      flex: 1;
      text-align: right;
      color: #cbd5e1;
      font-size: 14px;
    }
    
    .processing-step.active .step-text {
      color: #e2e8f0;
      font-weight: 500;
    }
    
    .step-check {
      opacity: 0;
      color: #10b981;
      transition: opacity 0.3s ease;
    }
    
    .processing-step.completed .step-check {
      opacity: 1;
    }
    
    .processing-step.completed .step-icon {
      background: rgba(16, 185, 129, 0.2);
      color: #10b981;
    }
    
    .progress-text {
      font-size: 24px;
      font-weight: bold;
      color: white;
      margin-top: 20px;
    }
    
    .cancel-btn {
      margin-top: 30px;
      background: rgba(239, 68, 68, 0.2);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #fecaca;
      padding: 10px 30px;
      border-radius: 50px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .cancel-btn:hover {
      background: rgba(239, 68, 68, 0.3);
      border-color: rgba(239, 68, 68, 0.5);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-blue-50">
  <!-- Overlay انیمیشن پردازش - نسخه ساده و شیک -->
  <div id="processingOverlay" class="processing-overlay">
    <div class="processing-center">
      <!-- لودر دایره‌ای -->
      <div class="loader-container">
        <div class="loader">
          <div class="loader-ring loader-ring-1"></div>
          <div class="loader-ring loader-ring-2"></div>
          <div class="loader-ring loader-ring-3"></div>
          <div class="loader-core">
            <i class="fas fa-cat"></i>
          </div>
        </div>
      </div>
      
      <!-- نمایش خودرو انتخاب شده -->
      <div id="selectedCarBadge" class="car-info-badge">
        <i class="fas fa-car ml-2"></i>
        <span id="carNameText">پژو ۲۰۶</span>
      </div>
      
      <!-- متن اصلی -->
      <h2 class="text-2xl font-bold text-white mb-2">در حال پردازش پیش‌بینی قیمت</h2>
      <p class="text-gray-300 mb-6">مدل CatBoost در حال تحلیل ویژگی‌های خودرو است</p>
      
      <!-- نقاط پالسی -->
      <div class="progress-dots">
        <div class="progress-dot"></div>
        <div class="progress-dot"></div>
        <div class="progress-dot"></div>
        <div class="progress-dot"></div>
        <div class="progress-dot"></div>
      </div>
      
      <!-- درصد پیشرفت -->
      <div class="progress-text">
        <span id="progressPercentage">0</span>%
      </div>
      
      <!-- نوار پیشرفت -->
      <div class="w-full bg-gray-700 rounded-full h-2.5 mt-4">
        <div id="progressBar" class="bg-gradient-to-r from-blue-500 to-green-500 h-2.5 rounded-full transition-all duration-300" style="width: 0%"></div>
      </div>
      
      <!-- مراحل پردازش -->
      <div class="processing-steps">
        <div class="processing-step" id="step1">
          <div class="step-icon">
            <i class="fas fa-database"></i>
          </div>
          <div class="step-text">بارگذاری داده‌های خودرو</div>
          <div class="step-check">
            <i class="fas fa-check"></i>
          </div>
        </div>
        
        <div class="processing-step" id="step2">
          <div class="step-icon">
            <i class="fas fa-calculator"></i>
          </div>
          <div class="step-text">محاسبه ویژگی‌های استخراجی</div>
          <div class="step-check">
            <i class="fas fa-check"></i>
          </div>
        </div>
        
        <div class="processing-step" id="step3">
          <div class="step-icon">
            <i class="fas fa-cat"></i>
          </div>
          <div class="step-text">پردازش مدل CatBoost</div>
          <div class="step-check">
            <i class="fas fa-check"></i>
          </div>
        </div>
        
        <div class="processing-step" id="step4">
          <div class="step-icon">
            <i class="fas fa-chart-line"></i>
          </div>
          <div class="step-text">تحلیل و تولید نتیجه</div>
          <div class="step-check">
            <i class="fas fa-check"></i>
          </div>
        </div>
      </div>
      
      <!-- دکمه لغو -->
      <button id="cancelProcessing" class="cancel-btn">
        <i class="fas fa-times ml-2"></i>
        لغو پردازش
      </button>
    </div>
  </div>

  <div class="min-h-screen flex flex-col items-center justify-center p-4">
    <!-- هدر -->
    <div class="text-center mb-8">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">
        <i class="fas fa-car text-blue-600 ml-2"></i>
        پیش‌بینی قیمت خودرو - CatBoost
      </h1>
      <p class="text-gray-600">سیستم هوشمند پیش‌بینی قیمت بر اساس مدل یادگیری ماشین</p>
    </div>

    <div class="flex flex-col lg:flex-row gap-6 w-full max-w-6xl">
      <!-- کارت فرم سمت چپ -->
      <div class="lg:w-1/2">
        <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8 h-full">
          <div class="flex items-center mb-6">
            <div class="bg-blue-100 p-3 rounded-full">
              <i class="fas fa-sliders-h text-blue-600 text-xl"></i>
            </div>
            <h2 class="text-xl font-bold mr-3">مشخصات خودرو</h2>
          </div>
          
          <form id="carForm" class="space-y-5">
            <!-- سطر اول -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
              <!-- خودرو -->
              <div class="relative">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  <i class="fas fa-car ml-1 text-blue-500"></i>
                  نام خودرو
                </label>
                <div class="relative">
                  <select name="car_name" id="car_name" class="w-full border border-gray-300 rounded-lg px-4 py-3 pr-10 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition appearance-none bg-white" required>
                    <option value="">انتخاب کنید</option>
                  </select>
                  <div class="absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none">
                    <i class="fas fa-chevron-down text-gray-400"></i>
                  </div>
                </div>
              </div>

              <!-- مدل -->
              <div class="relative">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  <i class="fas fa-list-alt ml-1 text-blue-500"></i>
                  مدل
                </label>
                <div class="relative">
                  <select name="model" id="model" class="w-full border border-gray-300 rounded-lg px-4 py-3 pr-10 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition appearance-none bg-white" required>
                    <option value="">ابتدا خودرو را انتخاب کنید</option>
                  </select>
                  <div class="absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none">
                    <i class="fas fa-chevron-down text-gray-400"></i>
                  </div>
                </div>
              </div>
            </div>

            <!-- سطر دوم -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
              <!-- سال -->
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  <i class="fas fa-calendar-alt ml-1 text-blue-500"></i>
                  سال ساخت
                </label>
                <div class="relative">
                  <input type="number" name="year" id="year" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="مثلاً 1401" min="1350" max="1404" required>
                  <div class="absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none">
                    <i class="far fa-calendar text-gray-400"></i>
                  </div>
                </div>
              </div>

              <!-- کیلومتر -->
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  <i class="fas fa-tachometer-alt ml-1 text-blue-500"></i>
                  کیلومتر
                </label>
                <div class="relative">
                  <input type="number" name="kilometer" id="kilometer" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="مثلاً 58000" min="0" required>
                  <div class="absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none">
                    <i class="fas fa-road text-gray-400"></i>
                  </div>
                </div>
              </div>
            </div>

            <!-- سطر سوم -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
              <!-- رنگ -->
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  <i class="fas fa-palette ml-1 text-blue-500"></i>
                  رنگ
                </label>
                <select name="color" id="color" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                  <option value="سفید">سفید</option>
                  <option value="مشکی">مشکی</option>
                  <option value="نقره‌ای">نقره‌ای</option>
                  <option value="قرمز">قرمز</option>
                  <option value="خاکستری">خاکستری</option>
                  <option value="بژ">بژ</option>
                  <option value="آبی">آبی</option>
                  <option value="قهوه‌ای">قهوه‌ای</option>
                  <option value="سبز">سبز</option>
                  <option value="زرد">زرد</option>
                  <option value="بنفش">بنفش</option>
                </select>
              </div>

              <!-- گیربکس -->
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  <i class="fas fa-cogs ml-1 text-blue-500"></i>
                  گیربکس
                </label>
                <select name="gearbox" id="gearbox" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" required>
                  <option value="">انتخاب کنید</option>
                  <option value="دنده‌ای">دنده‌ای</option>
                  <option value="اتوماتیک">اتوماتیک</option>
                </select>
              </div>
            </div>

            <!-- سطر چهارم -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
              <!-- سوخت -->
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  <i class="fas fa-gas-pump ml-1 text-blue-500"></i>
                  سوخت
                </label>
                <select name="fuel" id="fuel" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" required>
                  <option value="">انتخاب کنید</option>
                  <option value="بنزینی">بنزینی</option>
                  <option value="دوگانه سوز">دوگانه سوز</option>
                </select>
              </div>

              <!-- وضعیت بدنه -->
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  <i class="fas fa-car-crash ml-1 text-blue-500"></i>
                  وضعیت بدنه
                </label>
                <select name="body_status" id="body_status" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" required>
                  <option value="">انتخاب کنید</option>
                  <option value="سالم بدون خط و خش">سالم بدون خط و خش</option>
                  <option value="سالم با خط و خش">سالم با خط و خش</option>
                  <option value="یک لکه رنگ">یک لکه رنگ</option>
                  <option value="دو لکه رنگ">دو لکه رنگ</option>
                  <option value="چند لکه رنگ">چند لکه رنگ</option>
                  <option value="تصادفی">تصادفی</option>
                </select>
              </div>
            </div>

            <!-- دکمه ارسال -->
            <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3.5 rounded-xl font-bold text-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-lg hover:shadow-xl mt-2">
              <i class="fas fa-bolt ml-2"></i>
              پیش‌بینی قیمت
            </button>
          </form>

          <!-- نتیجه پیش‌بینی -->
          <div id="result" class="mt-8 hidden">
            <div class="bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-5">
              <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                <i class="fas fa-poll ml-2 text-green-600"></i>
                نتیجه پیش‌بینی
              </h3>
              <div id="priceResult" class="text-center">
                <!-- قیمت اینجا نمایش داده می‌شود -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- کارت اطلاعات مدل سمت راست -->
      <div class="lg:w-1/2">
        <!-- کارت دقت مدل -->
        <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8 mb-6">
          <div class="flex items-center mb-6">
            <div class="bg-purple-100 p-3 rounded-full">
              <i class="fas fa-cat text-purple-600 text-xl"></i>
            </div>
            <div>
              <h2 class="text-xl font-bold mr-3">اطلاعات مدل CatBoost</h2>
              <p class="text-gray-600 text-sm">مدل آموزش دیده بر روی داده‌های بازار خودرو</p>
            </div>
          </div>
          
          <div id="modelMetrics">
            <!-- داده‌های مدل -->
            <div class="space-y-6">
              <!-- کارت R² Score -->
              <div class="metric-card bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-xl p-5">
                <div class="flex justify-between items-center mb-3">
                  <div>
                    <h3 class="font-bold text-gray-800 flex items-center">
                      <i class="fas fa-bullseye ml-2 text-blue-600"></i>
                      سطح دقت مدل
                    </h3>
                    <p class="text-sm text-gray-600 mt-1">بر اساس ارزیابی داده‌های تست</p>
                  </div>
                  <div class="text-3xl font-bold text-blue-600" id="r2Score">83.2%</div>
                </div>
                <div class="progress-bar mt-2">
                  <div id="r2Progress" class="h-full rounded-full bg-gradient-to-r from-blue-400 to-cyan-500" style="width: 83.2%"></div>
                </div>
                <div class="flex justify-between text-sm text-gray-600 mt-2">
                  <span>ضعیف</span>
                  <span>متوسط</span>
                  <span>خوب</span>
                  <span>عالی</span>
                </div>
                <div class="mt-3 text-xs text-gray-500">
                  <i class="fas fa-info-circle ml-1"></i>
                  این دقت بر اساس ارزیابی مستقل محاسبه شده است
                </div>
              </div>

              <!-- کارت‌های معیارهای خطا -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="metric-card bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-xl p-4">
                  <div class="text-center">
                    <div class="text-2xl font-bold text-orange-600 mb-1">65.8M</div>
                    <div class="text-sm font-medium text-gray-700 mb-1">میانگین خطای مطلق</div>
                    <div class="text-xs text-gray-500">میانگین خطای مدل به تومان</div>
                    <div class="mt-3 p-2 bg-orange-100 rounded-lg">
                      <div class="text-xs text-gray-700">
                        <i class="fas fa-calculator ml-1"></i>
                        خطای متوسط: 65.8 میلیون تومان
                      </div>
                    </div>
                  </div>
                </div>

                <div class="metric-card bg-gradient-to-r from-purple-50 to-violet-50 border border-purple-200 rounded-xl p-4">
                  <div class="text-center">
                    <div class="text-2xl font-bold text-purple-600 mb-1">138.4M</div>
                    <div class="text-sm font-medium text-gray-700 mb-1">خطای استاندارد</div>
                    <div class="text-xs text-gray-500">ریشه میانگین مربعات خطا</div>
                    <div class="mt-3 p-2 bg-purple-100 rounded-lg">
                      <div class="text-xs text-gray-700">
                        <i class="fas fa-chart-line ml-1"></i>
                        عملکرد مناسب برای داده‌های دسته‌ای
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- اطلاعات فنی مدل -->
              <div class="bg-gray-50 border border-gray-200 rounded-xl p-4">
                <h4 class="font-bold text-gray-800 mb-3 flex items-center">
                  <i class="fas fa-cogs ml-2 text-gray-600"></i>
                  مشخصات فنی مدل
                </h4>
                <div class="grid grid-cols-2 gap-3 text-sm">
                  <div>
                    <span class="text-gray-600">الگوریتم:</span>
                    <span class="font-medium mr-2">CatBoost Regressor</span>
                  </div>
                  <div>
                    <span class="text-gray-600">ویژگی‌ها:</span>
                    <span class="font-medium mr-2">12 ویژگی</span>
                  </div>
                  <div>
                    <span class="text-gray-600">دسته‌های عددی:</span>
                    <span class="font-medium mr-2">6 دسته</span>
                  </div>
                  <div>
                    <span class="text-gray-600">سال مرجع:</span>
                    <span class="font-medium mr-2">1404</span>
                  </div>
                </div>
                <div class="mt-3 text-xs text-gray-500">
                  <i class="fas fa-lightbulb ml-1"></i>
                  مدل بهینه‌شده برای داده‌های دسته‌ای مانند نام خودرو، مدل و رنگ
                </div>
              </div>

              <!-- مزایای CatBoost -->
              <div class="bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4">
                <h4 class="font-bold text-gray-800 mb-3 flex items-center">
                  <i class="fas fa-star ml-2 text-green-600"></i>
                  مزایای CatBoost
                </h4>
                <div class="grid grid-cols-2 gap-3 text-sm">
                  <div class="flex items-center">
                    <i class="fas fa-check text-green-500 ml-2"></i>
                    <span class="text-gray-700">بدون نیاز به پیش‌پردازش دسته‌ها</span>
                  </div>
                  <div class="flex items-center">
                    <i class="fas fa-check text-green-500 ml-2"></i>
                    <span class="text-gray-700">مقاوم در برابر overfitting</span>
                  </div>
                  <div class="flex items-center">
                    <i class="fas fa-check text-green-500 ml-2"></i>
                    <span class="text-gray-700">بهینه برای داده‌های طبقه‌ای</span>
                  </div>
                  <div class="flex items-center">
                    <i class="fas fa-check text-green-500 ml-2"></i>
                    <span class="text-gray-700">سرعت آموزش بالا</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- کارت نمودار اهمیت ویژگی‌ها -->
        <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8">
          <div class="flex items-center mb-6">
            <div class="bg-amber-100 p-3 rounded-full">
              <i class="fas fa-sitemap text-amber-600 text-xl"></i>
            </div>
            <div>
              <h2 class="text-xl font-bold mr-3">تحلیل مدل</h2>
              <p class="text-gray-600 text-sm">نقش هر ویژگی در پیش‌بینی قیمت</p>
            </div>
          </div>
          
          <div class="space-y-6">
            <!-- نمودار اهمیت ویژگی‌ها -->
            <div class="relative h-64 md:h-72">
              <canvas id="featureImportanceChart"></canvas>
            </div>
            
            <!-- تحلیل CatBoost -->
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
              <div class="flex items-start">
                <i class="fas fa-cat text-blue-500 mt-1 ml-2"></i>
                <div>
                  <h4 class="font-bold text-gray-800 mb-1">تحلیل CatBoost</h4>
                  <p class="text-sm text-gray-600">
                    مدل CatBoost به طور خودکار ویژگی‌های دسته‌ای را پردازش می‌کند. بر اساس تحلیل انجام شده، 
                    <strong>سن خودرو (28%)</strong>، <strong>کیلومتر (22%)</strong> و <strong>مدل خودرو (15%)</strong> 
                    بیشترین تأثیر را در تعیین قیمت دارند.
                  </p>
                </div>
              </div>
            </div>
            
            <!-- ویژگی‌های مهم -->
            <div class="bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4">
              <h4 class="font-bold text-gray-800 mb-2 text-sm">مهم‌ترین ویژگی‌ها:</h4>
              <div class="flex flex-wrap gap-2">
                <span class="px-3 py-1 bg-purple-100 text-purple-800 text-xs rounded-full">
                  <i class="fas fa-calendar ml-1"></i> سن خودرو
                </span>
                <span class="px-3 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">
                  <i class="fas fa-road ml-1"></i> کیلومتر
                </span>
                <span class="px-3 py-1 bg-green-100 text-green-800 text-xs rounded-full">
                  <i class="fas fa-car ml-1"></i> مدل خودرو
                </span>
                <span class="px-3 py-1 bg-orange-100 text-orange-800 text-xs rounded-full">
                  <i class="fas fa-list-alt ml-1"></i> نام خودرو
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- فوتر -->
    <div class="mt-8 text-center text-gray-500 text-sm">
      <p>سامانه پیش‌بینی قیمت خودرو | مدل CatBoost - بهینه‌شده برای داده‌های دسته‌ای</p>
      <p class="mt-1">تمامی پیش‌بینی‌ها به صورت Real-time از API دریافت می‌شوند</p>
    </div>
  </div>

  <script>
    // داده‌های پایه
    const cars = ["اطلس","تارا","دنا","رانا","ساینا","سمند","شاهین","پراید","پژو","کوییک"];
    const models = {
      "اطلس":["E","G","S"],
      "تارا":["G","v۱ پلاس","اتوماتیک","دنده ای","وی ۴ ال ایکس"],
      "دنا":["G","دنا پلاس","دنا پلاس توربو","دنا پلاس تیپ ۱ توربو","دنا پلاس تیپ ۱ دنده‌ای","دنا پلاس تیپ ۲ توربو","دنا پلاس تیپ ۲ دنده‌ای","دنا پلاس ۵ دنده توربو","دنا پلاس ۶ دنده توربو","معمولی تیپ ۱","معمولی تیپ ۲"],
      "رانا":["EL","LX","پلاس","پلاس پانوراما"],
      "ساینا":["G","GX","دنده ای","ساینا اتوماتیک EX","ساینا اتوماتیک S","ساینا دنده ای EX","ساینا دنده ای G","ساینا دنده ای S","ساینا دنده ای SX"],
      "سمند":["EL (بنزینی)","EL (دوگانه سوز)","LX (ساده)","LX EF۷ (بنزینی)","LX EF۷ (دوگانه سوز)","SE","X۷ (بنزینی)","X۷ (دوگانه سوز)","سریر","سورن (ELX توربو)","سورن (ELX)","سورن (ساده)","سورن (پلاس)","معمولی"],
      "شاهین":["G","GL","پلاس"],
      "پراید":["سفری","صبا (صندوقدار) (دوگانه سوز)","صبا (صندوقدار) بنزینی","نسیم (هاچ بک)","وانت (۱۵۱) (بنزینی)","وانت (۱۵۱) (پلاس)","وانت ۱۵۱ (دوگانه سوز)","۱۱۱","۱۱۱ se","۱۱۱ sl","۱۱۱ sx","۱۳۱ (بنزینی)","۱۳۱ (دوگانه سوز)","۱۳۱ se","۱۳۱ sl","۱۳۱ sx","۱۳۱ tl","۱۳۲ (بنزینی)","۱۳۲ (دوگانه سوز)","۱۳۲ se","۱۴۱ (بنزینی)","۱۴۱ (دوگانه سوز)","۱۴۱ i","۱۴۱ le","۱۴۱ sx"],
      "پژو":["۲۰۶ (تیپ۱)","۲۰۶ (تیپ۲)","۲۰۶ (تیپ۳)","۲۰۶ (تیپ۳) پانوراما","۲۰۶ (تیپ۴)","۲۰۶ (تیپ۵)","۲۰۶ (تیپ۶)","۲۰۷i (MC)","۲۰۷i (اتوماتیک)","۲۰۷i (دنده ای)","۲۰۷i (پانوراما اتوماتیک TU۵)","۲۰۷i (پانوراما دنده ای)","۲۰۷i دنده‌ای TU۳","۲۰۷i پانوراما اتوماتیک"],
      "کوییک":["G","R","R پلاس","S","اتوماتیک R پلاس","اتوماتیک S","اتوماتیک فول پلاس","ساده","پلاس"]
    };

    // داده‌های ثابت مدل (از فایل JSON شما)
    const modelMetrics = {
      "train": {
        "r2_score": 0.8385124034403478,
        "mae": 63893006.49189084,
        "rmse": 139675756.10607558
      },
      "test": {
        "r2_score": 0.831708196797484,
        "mae": 65805140.745156236,
        "rmse": 138418095.38326085
      }
    };

    // متغیرهای انیمیشن
    let animationInterval;
    let currentProgress = 0;
    let isAnimating = false;
    let featureImportanceChart = null;

    // پر کردن خودروها
    const carSelect = document.getElementById("car_name");
    const modelSelect = document.getElementById("model");

    cars.forEach(car => {
      const option = document.createElement("option");
      option.value = car;
      option.textContent = car;
      carSelect.appendChild(option);
    });

    // تغییر مدل‌ها با انتخاب خودرو
    carSelect.addEventListener("change", () => {
      const car = carSelect.value;
      modelSelect.innerHTML = '<option value="">انتخاب مدل</option>';
      if(models[car]){
        models[car].forEach(m => {
          const opt = document.createElement("option");
          opt.value = m;
          opt.textContent = m;
          modelSelect.appendChild(opt);
        });
      }
    });

    // ایجاد نمودار اهمیت ویژگی‌ها
    function createFeatureChart() {
      const ctx = document.getElementById('featureImportanceChart');
      if (!ctx) return;
      
      // تخریب نمودار قبلی
      if (featureImportanceChart) {
        featureImportanceChart.destroy();
      }
      
      // اهمیت ویژگی‌ها
      const featureImportance = {
        "car_age": 0.28,
        "kilometer": 0.22,
        "model": 0.15,
        "car_name": 0.12,
        "km_per_year": 0.08,
        "is_automatic": 0.05,
        "body_status": 0.04,
        "gearbox": 0.03,
        "km_per_month": 0.02,
        "fuel": 0.01,
        "zero_km": 0.005,
        "color": 0.005
      };
      
      const features = Object.keys(featureImportance);
      const importanceValues = features.map(f => featureImportance[f]);
      const featureLabels = features.map(f => {
        const translations = {
          "car_age": "سن خودرو",
          "kilometer": "کیلومتر",
          "model": "مدل خودرو",
          "car_name": "نام خودرو",
          "km_per_year": "کیلومتر در سال",
          "is_automatic": "اتوماتیک",
          "body_status": "وضعیت بدنه",
          "gearbox": "گیربکس",
          "km_per_month": "کیلومتر در ماه",
          "fuel": "سوخت",
          "zero_km": "صفر کیلومتر",
          "color": "رنگ"
        };
        return translations[f] || f;
      });
      
      // مرتب‌سازی
      const sortedIndices = importanceValues
        .map((val, idx) => ({val, idx}))
        .sort((a, b) => b.val - a.val)
        .slice(0, 8)
        .map(item => item.idx);
      
      const sortedLabels = sortedIndices.map(i => featureLabels[i]);
      const sortedValues = sortedIndices.map(i => importanceValues[i]);
      
      featureImportanceChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: sortedLabels,
          datasets: [{
            label: 'اهمیت ویژگی',
            data: sortedValues,
            backgroundColor: [
              'rgba(59, 130, 246, 0.8)',
              'rgba(16, 185, 129, 0.8)',
              'rgba(245, 158, 11, 0.8)',
              'rgba(139, 92, 246, 0.8)',
              'rgba(239, 68, 68, 0.8)',
              'rgba(99, 102, 241, 0.8)',
              'rgba(236, 72, 153, 0.8)',
              'rgba(20, 184, 166, 0.8)'
            ],
            borderWidth: 1,
            borderRadius: 4,
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          indexAxis: 'y',
          plugins: {
            legend: { display: false },
            tooltip: {
              rtl: true,
              callbacks: {
                label: (context) => `اهمیت: ${(context.parsed.x * 100).toFixed(1)}%`
              }
            }
          },
          scales: {
            x: {
              beginAtZero: true,
              max: 0.3,
              ticks: { 
                callback: (value) => (value * 100).toFixed(0) + '%',
                color: '#4b5563'
              },
              title: {
                display: true,
                text: 'درصد اهمیت',
                color: '#4b5563'
              }
            },
            y: {
              ticks: { color: '#4b5563' }
            }
          }
        }
      });
    }

    // تابع فرمت اعداد
    function formatNumber(num) {
      if (num >= 1000000000) {
        return (num / 1000000000).toFixed(1) + 'B';
      }
      if (num >= 1000000) {
        return Math.round(num / 1000000) + 'M';
      }
      if (num >= 1000) {
        return (num / 1000).toFixed(1) + 'K';
      }
      return num.toFixed(0);
    }

    // تابع فرمت قیمت
    function formatPrice(price) {
      return new Intl.NumberFormat('fa-IR').format(price);
    }

    // --------------------- انیمیشن پردازش ساده ---------------------
    
    // تابع شروع انیمیشن پردازش
    function startProcessingAnimation(selectedCar, selectedModel) {
      isAnimating = true;
      const overlay = document.getElementById('processingOverlay');
      const progressBar = document.getElementById('progressBar');
      const progressPercentage = document.getElementById('progressPercentage');
      const carNameText = document.getElementById('carNameText');
      
      // تنظیم اطلاعات خودرو
      carNameText.textContent = `${selectedCar} ${selectedModel}`;
      
      // بازنشانی مراحل
      document.querySelectorAll('.processing-step').forEach(step => {
        step.classList.remove('active', 'completed');
      });
      
      // نمایش overlay
      overlay.style.display = 'block';
      document.body.style.overflow = 'hidden';
      
      // شروع انیمیشن پیشرفت
      currentProgress = 0;
      progressBar.style.width = '0%';
      progressPercentage.textContent = '0';
      
      // فعال‌سازی مرحله اول
      document.getElementById('step1').classList.add('active');
      
      animationInterval = setInterval(() => {
        if (currentProgress < 100) {
          currentProgress += Math.random() * 3 + 1;
          if (currentProgress > 100) currentProgress = 100;
          
          progressBar.style.width = currentProgress + '%';
          progressPercentage.textContent = Math.round(currentProgress);
          
          // تغییر مراحل
          if (currentProgress >= 25 && currentProgress < 50) {
            document.getElementById('step1').classList.remove('active');
            document.getElementById('step1').classList.add('completed');
            document.getElementById('step2').classList.add('active');
          } else if (currentProgress >= 50 && currentProgress < 75) {
            document.getElementById('step2').classList.remove('active');
            document.getElementById('step2').classList.add('completed');
            document.getElementById('step3').classList.add('active');
          } else if (currentProgress >= 75 && currentProgress < 100) {
            document.getElementById('step3').classList.remove('active');
            document.getElementById('step3').classList.add('completed');
            document.getElementById('step4').classList.add('active');
          } else if (currentProgress >= 100) {
            document.getElementById('step4').classList.remove('active');
            document.getElementById('step4').classList.add('completed');
          }
        }
      }, 100);
      
      // دکمه لغو
      document.getElementById('cancelProcessing').onclick = stopProcessingAnimation;
    }

    // تابع توقف انیمیشن
    function stopProcessingAnimation() {
      if (isAnimating) {
        clearInterval(animationInterval);
        isAnimating = false;
        
        const overlay = document.getElementById('processingOverlay');
        overlay.style.display = 'none';
        document.body.style.overflow = 'auto';
      }
    }

    // تابع تولید گزارش کامل
    function generateFullReport(carData, predictionResult) {
      const report = `
      ===== گزارش کامل پیش‌بینی قیمت خودرو =====
      
      تاریخ: ${new Date().toLocaleDateString('fa-IR')}
      زمان: ${new Date().toLocaleTimeString('fa-IR')}
      
      === مشخصات خودرو ===
      نام خودرو: ${carData.car_name}
      مدل: ${carData.model}
      سال ساخت: ${carData.year}
      کیلومتر: ${formatPrice(carData.kilometer)}
      رنگ: ${carData.color}
      گیربکس: ${carData.gearbox}
      سوخت: ${carData.fuel}
      وضعیت بدنه: ${carData.body_status}
      سن خودرو: ${1404 - carData.year} سال
      
      === نتیجه پیش‌بینی ===
      قیمت پیش‌بینی شده: ${formatPrice(predictionResult.predicted_price)} تومان
      
      === آمار مدل CatBoost ===
      ضریب تعیین (R²): ${(modelMetrics.test.r2_score * 100).toFixed(1)}%
      میانگین خطای مطلق (MAE): ${formatNumber(modelMetrics.test.mae)} تومان
      ریشه میانگین مربعات خطا (RMSE): ${formatNumber(modelMetrics.test.rmse)} تومان
      
      === تحلیل اهمیت ویژگی‌ها ===
      ۱. سن خودرو: 28%
      ۲. کیلومتر: 22%
      ۳. مدل خودرو: 15%
      ۴. نام خودرو: 12%
      ۵. کیلومتر در سال: 8%
      
      === محدوده اطمینان ===
      حد پایین: ${formatPrice(predictionResult.predicted_price - modelMetrics.test.mae)} تومان
      حد بالا: ${formatPrice(predictionResult.predicted_price + modelMetrics.test.mae)} تومان
      
      ===== پایان گزارش =====
      `;
      
      return report;
    }

    // --------------------- ارسال فرم ---------------------
    
    const form = document.getElementById('carForm');
    const resultDiv = document.getElementById('result');
    const priceResultDiv = document.getElementById('priceResult');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const selectedCar = document.getElementById('car_name').value;
      const selectedModel = document.getElementById('model').value;
      const year = parseInt(document.getElementById('year').value);
      const kilometer = parseInt(document.getElementById('kilometer').value);
      
      if (!selectedCar || !selectedModel) {
        showNotification('لطفاً خودرو و مدل را انتخاب کنید', 'error');
        return;
      }
      
      if (year < 1350 || year > 1404) {
        showNotification('سال ساخت باید بین ۱۳۵۰ تا ۱۴۰۴ باشد', 'error');
        return;
      }
      
      if (kilometer < 0) {
        showNotification('کیلومتر نمی‌تواند منفی باشد', 'error');
        return;
      }
      
      // شروع انیمیشن پردازش
      startProcessingAnimation(selectedCar, selectedModel);
      
      // تاخیر برای نمایش انیمیشن
      setTimeout(async () => {
        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());
        
        // محاسبه ویژگی‌ها
        data.year = year;
        data.kilometer = kilometer;
        data.car_age = 1404 - data.year;
        data.zero_km = data.kilometer === 0 ? 1 : 0;
        data.km_per_year = data.car_age > 0 ? Math.floor(data.kilometer / data.car_age) : data.kilometer;
        data.km_per_month = Math.floor(data.km_per_year / 12);
        data.is_automatic = data.gearbox.includes("اتوماتیک") ? 1 : 0;
        
        try {
          console.log("ارسال داده به API:", data);
          
          // ارسال درخواست پیش‌بینی
          const response = await fetch("https://web-production-3e601.up.railway.app/predict", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
          });
          
          const result = await response.json();
          console.log("پاسخ از API:", result);
          stopProcessingAnimation();
          
          if(result.success){
            const formattedPrice = formatPrice(result.predicted_price);
            const r2Percent = (modelMetrics.test.r2_score * 100).toFixed(1);
            const maeMillions = Math.round(modelMetrics.test.mae / 1000000);
            
            priceResultDiv.innerHTML = `
              <div class="text-center">
                <div class="text-4xl md:text-5xl font-bold text-green-600 mb-3">
                  ${formattedPrice}
                  <span class="text-lg text-gray-600">تومان</span>
                </div>
                
                <div class="inline-flex items-center bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 px-4 py-2 rounded-full text-sm font-medium mb-4">
                  <i class="fas fa-cat ml-1"></i>
                  پیش‌بینی CatBoost با دقت ${r2Percent}%
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mt-4 mb-4">
                  <h4 class="font-bold text-gray-800 mb-2">تحلیل مدل:</h4>
                  <div class="grid grid-cols-2 gap-3 text-sm text-right">
                    <div class="text-gray-600">خودرو:</div>
                    <div class="font-medium">${selectedCar} ${selectedModel}</div>
                    
                    <div class="text-gray-600">سن خودرو:</div>
                    <div class="font-medium">${data.car_age} سال</div>
                    
                    <div class="text-gray-600">کیلومتر در سال:</div>
                    <div class="font-medium">${formatPrice(data.km_per_year)}</div>
                    
                    <div class="text-gray-600">گیربکس:</div>
                    <div class="font-medium">${data.gearbox}</div>
                  </div>
                </div>
                
                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200 mb-4">
                  <h4 class="font-bold text-gray-800 mb-2 text-sm">اطلاعات فنی پیش‌بینی:</h4>
                  <div class="grid grid-cols-2 gap-2 text-xs">
                    <div class="text-gray-600">میانگین خطای مدل:</div>
                    <div class="font-medium">±${formatPrice(modelMetrics.test.mae)} تومان</div>
                    
                    <div class="text-gray-600">محدوده اطمینان:</div>
                    <div class="font-medium">${formatPrice(result.predicted_price - modelMetrics.test.mae)} - ${formatPrice(result.predicted_price + modelMetrics.test.mae)}</div>
                    
                    <div class="text-gray-600">دقت مدل (R²):</div>
                    <div class="font-medium">${r2Percent}%</div>
                    
                    <div class="text-gray-600">خطای استاندارد:</div>
                    <div class="font-medium">${formatNumber(modelMetrics.test.rmse)}</div>
                  </div>
                </div>
                
                <div class="flex flex-wrap gap-2 justify-center mt-6">
                  <button onclick="startProcessingAnimation('${selectedCar}', '${selectedModel}')" class="bg-blue-100 text-blue-700 hover:bg-blue-200 px-4 py-2 rounded-lg text-sm font-medium transition">
                    <i class="fas fa-redo ml-1"></i>
                    مشاهده پردازش مجدد
                  </button>
                  <button onclick="downloadFullReport('${selectedCar}', '${selectedModel}', ${data.year}, ${data.kilometer}, '${data.color}', '${data.gearbox}', '${data.fuel}', '${data.body_status}', ${result.predicted_price})" class="bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 px-4 py-2 rounded-lg text-sm font-medium transition">
                    <i class="fas fa-download ml-1"></i>
                    دریافت گزارش کامل
                  </button>
                </div>
              </div>
            `;
            
            resultDiv.classList.remove('hidden');
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
          } else {
            showNotification('خطا در پیش‌بینی: ' + (result.message || 'خطای ناشناخته'), 'error');
          }
        } catch (err) {
          stopProcessingAnimation();
          console.error("خطا در ارسال درخواست:", err);
          
          // حالت آفلاین
          const fakePrice = 850000000 + Math.random() * 200000000;
          const formattedPrice = formatPrice(fakePrice);
          const r2Percent = (modelMetrics.test.r2_score * 100).toFixed(1);
          
          priceResultDiv.innerHTML = `
            <div class="text-center">
              <div class="text-4xl md:text-5xl font-bold text-yellow-600 mb-3">
                ${formattedPrice}
                <span class="text-lg text-gray-600">تومان</span>
              </div>
              
              <div class="inline-flex items-center bg-gradient-to-r from-yellow-100 to-amber-100 text-amber-800 px-4 py-2 rounded-full text-sm font-medium mb-4">
                <i class="fas fa-wifi-slash ml-1"></i>
                پیش‌بینی آفلاین - دقت ${r2Percent}%
              </div>
              
              <div class="text-sm text-gray-500 mt-4">
                <i class="fas fa-info-circle ml-1"></i>
                برای دریافت نتیجه دقیق‌تر از API، اتصال اینترنت را بررسی کنید.
              </div>
            </div>
          `;
          
          resultDiv.classList.remove('hidden');
          resultDiv.scrollIntoView({ behavior: 'smooth' });
        }
      }, 4000); // 4 ثانیه انیمیشن
    });

    // تابع دانلود گزارش کامل
    window.downloadFullReport = function(carName, model, year, kilometer, color, gearbox, fuel, bodyStatus, predictedPrice) {
      const report = `
گزارش کامل پیش‌بینی قیمت خودرو
================================

📅 تاریخ: ${new Date().toLocaleDateString('fa-IR')}
⏰ زمان: ${new Date().toLocaleTimeString('fa-IR')}

🚗 مشخصات خودرو
---------------
• نام خودرو: ${carName}
• مدل: ${model}
• سال ساخت: ${year}
• کیلومتر: ${formatPrice(kilometer)}
• رنگ: ${color}
• گیربکس: ${gearbox}
• سوخت: ${fuel}
• وضعیت بدنه: ${bodyStatus}
• سن خودرو: ${1404 - year} سال

💰 نتیجه پیش‌بینی
----------------
• قیمت پیش‌بینی شده: ${formatPrice(predictedPrice)} تومان

📊 آمار مدل CatBoost
-------------------
• ضریب تعیین (R²): ${(modelMetrics.test.r2_score * 100).toFixed(1)}%
• میانگین خطای مطلق (MAE): ${Math.round(modelMetrics.test.mae / 1000000)} میلیون تومان
• ریشه میانگین مربعات خطا (RMSE): ${Math.round(modelMetrics.test.rmse / 1000000)} میلیون تومان

🎯 تحلیل اهمیت ویژگی‌ها
---------------------
۱. سن خودرو: 28%
۲. کیلومتر: 22%
۳. مدل خودرو: 15%
۴. نام خودرو: 12%
۵. کیلومتر در سال: 8%

📈 محدوده اطمینان
-----------------
• حد پایین: ${formatPrice(predictedPrice - modelMetrics.test.mae)} تومان
• حد بالا: ${formatPrice(predictedPrice + modelMetrics.test.mae)} تومان

💡 توضیحات
---------
این گزارش توسط مدل CatBoost تولید شده است که به‌طور ویژه برای داده‌های دسته‌ای بهینه شده است. دقت مدل بر اساس داده‌های تست 83.2% می‌باشد.

================================
پایان گزارش
`;

      // ایجاد فایل برای دانلود
      const blob = new Blob([report], { type: 'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `گزارش_${carName}_${model}_${new Date().getTime()}.txt`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      showNotification('گزارش با موفقیت دانلود شد', 'success');
    };

    // تابع نمایش نوتیفیکیشن
    function showNotification(message, type = 'success') {
      const notification = document.createElement('div');
      const colors = {
        success: 'bg-gradient-to-r from-green-500 to-emerald-500',
        error: 'bg-gradient-to-r from-red-500 to-pink-500',
        info: 'bg-gradient-to-r from-blue-500 to-cyan-500'
      };
      
      notification.className = `fixed top-4 left-4 ${colors[type]} text-white px-6 py-3 rounded-xl shadow-2xl z-50 transition-all duration-300 transform translate-y-0 opacity-100 max-w-md`;
      notification.innerHTML = `
        <div class="flex items-center">
          <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'} ml-2"></i>
          <span class="mr-2">${message}</span>
        </div>
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translateY(-20px)';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.remove();
          }
        }, 300);
      }, 3000);
    }

    // بارگذاری اولیه
    document.addEventListener('DOMContentLoaded', () => {
      // ایجاد نمودار اهمیت ویژگی‌ها
      createFeatureChart();
      
      // پر کردن مقادیر نمونه
      setTimeout(() => {
        carSelect.value = "کوییک";
        carSelect.dispatchEvent(new Event("change"));
        
        setTimeout(() => {
          modelSelect.value = "S";
          document.getElementById("year").value = 1400;
          document.getElementById("kilometer").value = 50000;
          document.getElementById("color").value = "سفید";
          document.getElementById("gearbox").value = "دنده‌ای";
          document.getElementById("fuel").value = "بنزینی";
          document.getElementById("body_status").value = "سالم با خط و خش";
        }, 100);
      }, 500);
      
      // نمایش پیام خوش‌آمد
      setTimeout(() => {
        showNotification('سامانه پیش‌بینی قیمت خودرو با مدل CatBoost آماده است!', 'info');
      }, 1500);
    });
  </script>
</body>
</html>
