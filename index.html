<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ù‚ÛŒÙ…Øª Ø®ÙˆØ¯Ø±Ùˆ</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
  <div class="min-h-screen flex flex-col items-center justify-center p-4">
    <div class="bg-white shadow-lg rounded-xl p-6 w-full max-w-xl">
      <h1 class="text-2xl font-bold mb-6 text-center">Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ù‚ÛŒÙ…Øª Ø®ÙˆØ¯Ø±Ùˆ</h1>
      
      <form id="carForm" class="space-y-4">
        <!-- Ù†Ø§Ù… Ø®ÙˆØ¯Ø±Ùˆ -->
        <div>
          <label class="block mb-1">Ù†Ø§Ù… Ø®ÙˆØ¯Ø±Ùˆ</label>
          <select id="car_name" name="car_name" class="w-full border rounded px-3 py-2" required>
            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
            <option value="Ø§Ø·Ù„Ø³">Ø§Ø·Ù„Ø³</option>
            <option value="ØªØ§Ø±Ø§">ØªØ§Ø±Ø§</option>
            <option value="Ø¯Ù†Ø§">Ø¯Ù†Ø§</option>
            <option value="Ø±Ø§Ù†Ø§">Ø±Ø§Ù†Ø§</option>
            <option value="Ø³Ø§ÛŒÙ†Ø§">Ø³Ø§ÛŒÙ†Ø§</option>
            <option value="Ø³Ù…Ù†Ø¯">Ø³Ù…Ù†Ø¯</option>
            <option value="Ø´Ø§Ù‡ÛŒÙ†">Ø´Ø§Ù‡ÛŒÙ†</option>
            <option value="Ù¾Ø±Ø§ÛŒØ¯">Ù¾Ø±Ø§ÛŒØ¯</option>
            <option value="Ù¾Ú˜Ùˆ">Ù¾Ú˜Ùˆ</option>
            <option value="Ú©ÙˆÛŒÛŒÚ©">Ú©ÙˆÛŒÛŒÚ©</option>
          </select>
        </div>

        <!-- Ù…Ø¯Ù„ -->
        <div>
          <label class="block mb-1">Ù…Ø¯Ù„</label>
          <select id="model" name="model" class="w-full border rounded px-3 py-2" required>
            <option value="">Ø§Ø¨ØªØ¯Ø§ Ø®ÙˆØ¯Ø±Ùˆ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
          </select>
        </div>

        <!-- Ú©ÛŒÙ„ÙˆÙ…ØªØ± -->
        <div>
          <label class="block mb-1">Ú©ÛŒÙ„ÙˆÙ…ØªØ±</label>
          <input type="number" name="kilometer" class="w-full border rounded px-3 py-2" placeholder="Ù…Ø«Ù„Ø§Ù‹ 58000" required>
        </div>

        <!-- Ø±Ù†Ú¯ -->
        <div>
          <label class="block mb-1">Ø±Ù†Ú¯</label>
          <select name="color" class="w-full border rounded px-3 py-2" required>
            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
            <option>Ø³ÙÛŒØ¯</option>
            <option>Ù…Ø´Ú©ÛŒ</option>
            <option>Ù†Ù‚Ø±Ù‡â€ŒØ§ÛŒ</option>
            <option>Ù‚Ø±Ù…Ø²</option>
            <option>Ø®Ø§Ú©Ø³ØªØ±ÛŒ</option>
            <option>Ø¨Ú˜</option>
            <option>Ø¢Ø¨ÛŒ</option>
            <option>Ù‚Ù‡ÙˆÙ‡â€ŒØ§ÛŒ</option>
            <option>Ø³Ø¨Ø²</option>
            <option>Ø²Ø±Ø¯</option>
            <option>Ø¨Ù†ÙØ´</option>
          </select>
        </div>

        <!-- Ú¯ÛŒØ±Ø¨Ú©Ø³ -->
        <div>
          <label class="block mb-1">Ú¯ÛŒØ±Ø¨Ú©Ø³</label>
          <select name="gearbox" class="w-full border rounded px-3 py-2" required>
            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
            <option>Ø¯Ù†Ø¯Ù‡â€ŒØ§ÛŒ</option>
            <option>Ø§ØªÙˆÙ…Ø§ØªÛŒÚ©</option>
          </select>
        </div>

        <!-- Ø³ÙˆØ®Øª -->
        <div>
          <label class="block mb-1">Ø³ÙˆØ®Øª</label>
          <select name="fuel" class="w-full border rounded px-3 py-2" required>
            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
            <option>Ø¨Ù†Ø²ÛŒÙ†ÛŒ</option>
            <option>Ø¯ÙˆÚ¯Ø§Ù†Ù‡ Ø³ÙˆØ²</option>
          </select>
        </div>

        <!-- ÙˆØ¶Ø¹ÛŒØª Ø¨Ø¯Ù†Ù‡ -->
        <div>
          <label class="block mb-1">ÙˆØ¶Ø¹ÛŒØª Ø¨Ø¯Ù†Ù‡</label>
          <select name="body_status" class="w-full border rounded px-3 py-2" required>
            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
            <option>Ø³Ø§Ù„Ù… Ø¨Ø¯ÙˆÙ† Ø®Ø· Ùˆ Ø®Ø´</option>
            <option>Ø³Ø§Ù„Ù… Ø¨Ø§ Ø®Ø· Ùˆ Ø®Ø´</option>
            <option>ÛŒÚ© Ù„Ú©Ù‡ Ø±Ù†Ú¯</option>
            <option>Ø¯Ùˆ Ù„Ú©Ù‡ Ø±Ù†Ú¯</option>
            <option>Ú†Ù†Ø¯ Ù„Ú©Ù‡ Ø±Ù†Ú¯</option>
            <option>ØªØµØ§Ø¯ÙÛŒ</option>
          </select>
        </div>

        <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition">Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ù‚ÛŒÙ…Øª</button>
      </form>

      <div id="result" class="mt-6 text-center text-lg font-semibold"></div>
    </div>
  </div>

  <script>
    // Ù„ÛŒØ³Øª Ù…Ø¯Ù„â€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø®ÙˆØ¯Ø±Ùˆ
    const carModels = {
      "Ø§Ø·Ù„Ø³": ["E", "G", "S"],
      "ØªØ§Ø±Ø§": ["G", "vÛ± Ù¾Ù„Ø§Ø³", "Ø§ØªÙˆÙ…Ø§ØªÛŒÚ©", "Ø¯Ù†Ø¯Ù‡ Ø§ÛŒ", "ÙˆÛŒ Û´ Ø§Ù„ Ø§ÛŒÚ©Ø³"],
      "Ø¯Ù†Ø§": ["G", "Ø¯Ù†Ø§ Ù¾Ù„Ø§Ø³", "Ø¯Ù†Ø§ Ù¾Ù„Ø§Ø³ ØªÙˆØ±Ø¨Ùˆ", "Ø¯Ù†Ø§ Ù¾Ù„Ø§Ø³ ØªÛŒÙ¾ Û± ØªÙˆØ±Ø¨Ùˆ", "Ø¯Ù†Ø§ Ù¾Ù„Ø§Ø³ ØªÛŒÙ¾ Û± Ø¯Ù†Ø¯Ù‡â€ŒØ§ÛŒ", "Ø¯Ù†Ø§ Ù¾Ù„Ø§Ø³ ØªÛŒÙ¾ Û² ØªÙˆØ±Ø¨Ùˆ", "Ø¯Ù†Ø§ Ù¾Ù„Ø§Ø³ ØªÛŒÙ¾ Û² Ø¯Ù†Ø¯Ù‡â€ŒØ§ÛŒ", "Ø¯Ù†Ø§ Ù¾Ù„Ø§Ø³ Ûµ Ø¯Ù†Ø¯Ù‡ ØªÙˆØ±Ø¨Ùˆ", "Ø¯Ù†Ø§ Ù¾Ù„Ø§Ø³ Û¶ Ø¯Ù†Ø¯Ù‡ ØªÙˆØ±Ø¨Ùˆ", "Ù…Ø¹Ù…ÙˆÙ„ÛŒ ØªÛŒÙ¾ Û±", "Ù…Ø¹Ù…ÙˆÙ„ÛŒ ØªÛŒÙ¾ Û²"],
      "Ø±Ø§Ù†Ø§": ["EL", "LX", "Ù¾Ù„Ø§Ø³", "Ù¾Ù„Ø§Ø³ Ù¾Ø§Ù†ÙˆØ±Ø§Ù…Ø§"],
      "Ø³Ø§ÛŒÙ†Ø§": ["G", "GX", "Ø¯Ù†Ø¯Ù‡ Ø§ÛŒ", "Ø³Ø§ÛŒÙ†Ø§ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© EX", "Ø³Ø§ÛŒÙ†Ø§ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© S", "Ø³Ø§ÛŒÙ†Ø§ Ø¯Ù†Ø¯Ù‡ Ø§ÛŒ EX", "Ø³Ø§ÛŒÙ†Ø§ Ø¯Ù†Ø¯Ù‡ Ø§ÛŒ G", "Ø³Ø§ÛŒÙ†Ø§ Ø¯Ù†Ø¯Ù‡ Ø§ÛŒ S", "Ø³Ø§ÛŒÙ†Ø§ Ø¯Ù†Ø¯Ù‡ Ø§ÛŒ SX"],
      "Ø³Ù…Ù†Ø¯": ["EL (Ø¨Ù†Ø²ÛŒÙ†ÛŒ)", "EL (Ø¯ÙˆÚ¯Ø§Ù†Ù‡ Ø³ÙˆØ²)", "LX (Ø³Ø§Ø¯Ù‡)", "LX EFÛ· (Ø¨Ù†Ø²ÛŒÙ†ÛŒ)", "LX EFÛ· (Ø¯ÙˆÚ¯Ø§Ù†Ù‡ Ø³ÙˆØ²)", "SE", "XÛ· (Ø¨Ù†Ø²ÛŒÙ†ÛŒ)", "XÛ· (Ø¯ÙˆÚ¯Ø§Ù†Ù‡ Ø³ÙˆØ²)", "Ø³Ø±ÛŒØ±", "Ø³ÙˆØ±Ù† (ELX ØªÙˆØ±Ø¨Ùˆ)", "Ø³ÙˆØ±Ù† (ELX)", "Ø³ÙˆØ±Ù† (Ø³Ø§Ø¯Ù‡)", "Ø³ÙˆØ±Ù† (Ù¾Ù„Ø§Ø³)", "Ù…Ø¹Ù…ÙˆÙ„ÛŒ"],
      "Ø´Ø§Ù‡ÛŒÙ†": ["G", "GL", "Ù¾Ù„Ø§Ø³"],
      "Ù¾Ø±Ø§ÛŒØ¯": ["Ø³ÙØ±ÛŒ", "ØµØ¨Ø§ (ØµÙ†Ø¯ÙˆÙ‚Ø¯Ø§Ø±) (Ø¯ÙˆÚ¯Ø§Ù†Ù‡ Ø³ÙˆØ²)", "ØµØ¨Ø§ (ØµÙ†Ø¯ÙˆÙ‚Ø¯Ø§Ø±) Ø¨Ù†Ø²ÛŒÙ†ÛŒ", "Ù†Ø³ÛŒÙ… (Ù‡Ø§Ú† Ø¨Ú©)", "ÙˆØ§Ù†Øª (Û±ÛµÛ±) (Ø¨Ù†Ø²ÛŒÙ†ÛŒ)", "ÙˆØ§Ù†Øª (Û±ÛµÛ±) (Ù¾Ù„Ø§Ø³)", "ÙˆØ§Ù†Øª Û±ÛµÛ± (Ø¯ÙˆÚ¯Ø§Ù†Ù‡ Ø³ÙˆØ²)", "Û±Û±Û±", "Û±Û±Û± se", "Û±Û±Û± sl", "Û±Û±Û± sx", "Û±Û³Û± (Ø¨Ù†Ø²ÛŒÙ†ÛŒ)", "Û±Û³Û± (Ø¯ÙˆÚ¯Ø§Ù†Ù‡ Ø³ÙˆØ²)", "Û±Û³Û± se", "Û±Û³Û± sl", "Û±Û³Û± sx", "Û±Û³Û± tl", "Û±Û³Û² (Ø¨Ù†Ø²ÛŒÙ†ÛŒ)", "Û±Û³Û² (Ø¯ÙˆÚ¯Ø§Ù†Ù‡ Ø³ÙˆØ²)", "Û±Û³Û² se", "Û±Û´Û± (Ø¨Ù†Ø²ÛŒÙ†ÛŒ)", "Û±Û´Û± (Ø¯ÙˆÚ¯Ø§Ù†Ù‡ Ø³ÙˆØ²)", "Û±Û´Û± i", "Û±Û´Û± le", "Û±Û´Û± sx"],
      "Ù¾Ú˜Ùˆ": ["Û²Û°Û¶ (ØªÛŒÙ¾Û±)", "Û²Û°Û¶ (ØªÛŒÙ¾Û²)", "Û²Û°Û¶ (ØªÛŒÙ¾Û³)", "Û²Û°Û¶ (ØªÛŒÙ¾Û³) Ù¾Ø§Ù†ÙˆØ±Ø§Ù…Ø§", "Û²Û°Û¶ (ØªÛŒÙ¾Û´)", "Û²Û°Û¶ (ØªÛŒÙ¾Ûµ)", "Û²Û°Û¶ (ØªÛŒÙ¾Û¶)", "Û²Û°Û·i (MC)", "Û²Û°Û·i (Ø§ØªÙˆÙ…Ø§ØªÛŒÚ©)", "Û²Û°Û·i (Ø¯Ù†Ø¯Ù‡ Ø§ÛŒ)", "Û²Û°Û·i (Ù¾Ø§Ù†ÙˆØ±Ø§Ù…Ø§ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© TUÛµ)", "Û²Û°Û·i (Ù¾Ø§Ù†ÙˆØ±Ø§Ù…Ø§ Ø¯Ù†Ø¯Ù‡ Ø§ÛŒ)", "Û²Û°Û·i Ø¯Ù†Ø¯Ù‡â€ŒØ§ÛŒ TUÛ³", "Û²Û°Û·i Ù¾Ø§Ù†ÙˆØ±Ø§Ù…Ø§ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ©"],
      "Ú©ÙˆÛŒÛŒÚ©": ["G", "R", "R Ù¾Ù„Ø§Ø³", "S", "Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© R Ù¾Ù„Ø§Ø³", "Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© S", "Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© ÙÙˆÙ„ Ù¾Ù„Ø§Ø³", "Ø³Ø§Ø¯Ù‡", "Ù¾Ù„Ø§Ø³"]
    };

    const carSelect = document.getElementById('car_name');
    const modelSelect = document.getElementById('model');
    const resultDiv = document.getElementById('result');
    const form = document.getElementById('carForm');

    // ÙˆÙ‚ØªÛŒ Ø®ÙˆØ¯Ø±Ùˆ ØªØºÛŒÛŒØ± Ú©Ø±Ø¯ØŒ Ù…Ø¯Ù„â€ŒÙ‡Ø§ Ø¢Ù¾Ø¯ÛŒØª Ø´ÙˆÙ†Ø¯
    carSelect.addEventListener('change', () => {
      const selectedCar = carSelect.value;
      modelSelect.innerHTML = '<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>';
      if(carModels[selectedCar]){
        carModels[selectedCar].forEach(model => {
          const opt = document.createElement('option');
          opt.value = model;
          opt.textContent = model;
          modelSelect.appendChild(opt);
        });
      }
    });

    // Ø§Ø±Ø³Ø§Ù„ ÙØ±Ù…
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      resultDiv.textContent = "Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ...";

      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());

      data.zero_km = data.kilometer == 0 ? 1 : 0;
      data.km_per_year = Math.floor(data.kilometer / (1404 - data.year || 1));
      data.is_automatic = data.gearbox.includes("Ø§ØªÙˆÙ…Ø§ØªÛŒÚ©") ? 1 : 0;

      try {
        const response = await fetch("https://web-production-3e601.up.railway.app/predict", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });

        const result = await response.json();
        if(result.success){
          resultDiv.textContent = `ğŸ’° Ù‚ÛŒÙ…Øª Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ø´Ø¯Ù‡: ${result.formatted_price} ØªÙˆÙ…Ø§Ù†`;
        } else {
          resultDiv.textContent = `âŒ Ø®Ø·Ø§: ${result.message || 'Ø®Ø·Ø§ÛŒ Ù†Ø§Ø´Ù†Ø§Ø®ØªÙ‡'}`;
        }
      } catch (err) {
        resultDiv.textContent = `âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±`;
        console.error(err);
      }
    });
  </script>
</body>
</html>
