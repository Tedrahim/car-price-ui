<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ูพุดโุจู ููุช ุฎูุฏุฑู</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
  <div class="min-h-screen flex flex-col items-center justify-center p-4">
    <div class="bg-white shadow-lg rounded-xl p-6 w-full max-w-xl">
      <h1 class="text-2xl font-bold mb-6 text-center">ูพุดโุจู ููุช ุฎูุฏุฑู</h1>
      
      <form id="carForm" class="space-y-4">
        <!-- ูุงู ุฎูุฏุฑู -->
        <div>
          <label class="block mb-1">ูุงู ุฎูุฏุฑู</label>
          <select name="car_name" class="w-full border rounded px-3 py-2" required>
            <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option>
            <option>ุงุทูุณ</option>
            <option>ุชุงุฑุง</option>
            <option>ุฏูุง</option>
            <option>ุฑุงูุง</option>
            <option>ุณุงูุง</option>
            <option>ุณููุฏ</option>
            <option>ุดุงูู</option>
            <option>ูพุฑุงุฏ</option>
            <option>ูพฺู</option>
            <option>ฺฉูฺฉ</option>
          </select>
        </div>

        <!-- ูุฏู -->
        <div>
          <label class="block mb-1">ูุฏู</label>
          <select name="model" class="w-full border rounded px-3 py-2" required>
            <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option>
            <!-- ุงูุฌุง ูุณุช ุชูุงู ูุฏูโูุง ฺฉู ุฏุงุฏ -->
            <option>E</option>
            <option>EL</option>
            <option>EL (ุจูุฒู)</option>
            <option>EL (ุฏูฺฏุงูู ุณูุฒ)</option>
            <option>G</option>
            <option>GL</option>
            <option>GX</option>
            <option>LX</option>
            <option>LX (ุณุงุฏู)</option>
            <option>LX EFท (ุจูุฒู)</option>
            <option>LX EFท (ุฏูฺฏุงูู ุณูุฒ)</option>
            <option>R</option>
            <option>R ูพูุงุณ</option>
            <option>S</option>
            <option>SE</option>
            <option>Xท (ุจูุฒู)</option>
            <option>Xท (ุฏูฺฏุงูู ุณูุฒ)</option>
            <option>vฑ ูพูุงุณ</option>
            <option>ุงุชููุงุชฺฉ</option>
            <option>ุงุชููุงุชฺฉ R ูพูุงุณ</option>
            <option>ุงุชููุงุชฺฉ S</option>
            <option>ุงุชููุงุชฺฉ ููู ูพูุงุณ</option>
            <option>ุฏูุง ูพูุงุณ</option>
            <option>ุฏูุง ูพูุงุณ ุชูุฑุจู</option>
            <option>ุฏูุง ูพูุงุณ ุชูพ ฑ ุชูุฑุจู</option>
            <option>ุฏูุง ูพูุงุณ ุชูพ ฑ ุฏูุฏูโุง</option>
            <option>ุฏูุง ูพูุงุณ ุชูพ ฒ ุชูุฑุจู</option>
            <option>ุฏูุง ูพูุงุณ ุชูพ ฒ ุฏูุฏูโุง</option>
            <option>ุฏูุง ูพูุงุณ ต ุฏูุฏู ุชูุฑุจู</option>
            <option>ุฏูุง ูพูุงุณ ถ ุฏูุฏู ุชูุฑุจู</option>
            <option>ุฏูุฏู ุง</option>
            <option>ุณุงุฏู</option>
            <option>ุณุงูุง ุงุชููุงุชฺฉ EX</option>
            <option>ุณุงูุง ุงุชููุงุชฺฉ S</option>
            <option>ุณุงูุง ุฏูุฏู ุง EX</option>
            <option>ุณุงูุง ุฏูุฏู ุง G</option>
            <option>ุณุงูุง ุฏูุฏู ุง S</option>
            <option>ุณุงูุง ุฏูุฏู ุง SX</option>
            <option>ุณุฑุฑ</option>
            <option>ุณูุฑ</option>
            <option>ุณูุฑู (ELX ุชูุฑุจู)</option>
            <option>ุณูุฑู (ELX)</option>
            <option>ุณูุฑู (ุณุงุฏู)</option>
            <option>ุณูุฑู (ูพูุงุณ)</option>
            <option>ุตุจุง (ุตูุฏููุฏุงุฑ) (ุฏูฺฏุงูู ุณูุฒ)</option>
            <option>ุตุจุง (ุตูุฏููุฏุงุฑ) ุจูุฒู</option>
            <option>ูุนููู</option>
            <option>ูุนููู ุชูพ ฑ</option>
            <option>ูุนููู ุชูพ ฒ</option>
            <option>ูุณู (ูุงฺ ุจฺฉ)</option>
            <option>ูุงูุช (ฑตฑ) (ุจูุฒู)</option>
            <option>ูุงูุช (ฑตฑ) (ูพูุงุณ)</option>
            <option>ูุงูุช ฑตฑ (ุฏูฺฏุงูู ุณูุฒ)</option>
            <option>ู ด ุงู ุงฺฉุณ</option>
            <option>ูพูุงุณ</option>
            <option>ูพูุงุณ ูพุงููุฑุงูุง</option>
            <option>ฑฑฑ</option>
            <option>ฑฑฑ se</option>
            <option>ฑฑฑ sl</option>
            <option>ฑฑฑ sx</option>
            <option>ฑณฑ (ุจูุฒู)</option>
            <option>ฑณฑ (ุฏูฺฏุงูู ุณูุฒ)</option>
            <option>ฑณฑ se</option>
            <option>ฑณฑ sl</option>
            <option>ฑณฑ sx</option>
            <option>ฑณฑ tl</option>
            <option>ฑณฒ (ุจูุฒู)</option>
            <option>ฑณฒ (ุฏูฺฏุงูู ุณูุฒ)</option>
            <option>ฑณฒ se</option>
            <option>ฑดฑ (ุจูุฒู)</option>
            <option>ฑดฑ (ุฏูฺฏุงูู ุณูุฒ)</option>
            <option>ฑดฑ i</option>
            <option>ฑดฑ le</option>
            <option>ฑดฑ sx</option>
            <option>ฒฐถ (ุชูพฑ)</option>
            <option>ฒฐถ (ุชูพฒ)</option>
            <option>ฒฐถ (ุชูพณ)</option>
            <option>ฒฐถ (ุชูพณ) ูพุงููุฑุงูุง</option>
            <option>ฒฐถ (ุชูพด)</option>
            <option>ฒฐถ (ุชูพต)</option>
            <option>ฒฐถ (ุชูพถ)</option>
            <option>ฒฐทi (MC)</option>
            <option>ฒฐทi (ุงุชููุงุชฺฉ)</option>
            <option>ฒฐทi (ุฏูุฏู ุง)</option>
            <option>ฒฐทi (ูพุงููุฑุงูุง ุงุชููุงุชฺฉ TUต)</option>
            <option>ฒฐทi (ูพุงููุฑุงูุง ุฏูุฏู ุง)</option>
            <option>ฒฐทi ุฏูุฏูโุง TUณ</option>
            <option>ฒฐทi ูพุงููุฑุงูุง ุงุชููุงุชฺฉ</option>
            <option>G</option>
            <option>R</option>
            <option>R ูพูุงุณ</option>
            <option>S</option>
            <option>ุงุชููุงุชฺฉ R ูพูุงุณ</option>
            <option>ุงุชููุงุชฺฉ S</option>
            <option>ุงุชููุงุชฺฉ ููู ูพูุงุณ</option>
            <option>ุณุงุฏู</option>
            <option>ูพูุงุณ</option>
          </select>
        </div>

        <!-- ฺฉูููุชุฑ -->
        <div>
          <label class="block mb-1">ฺฉูููุชุฑ</label>
          <input type="number" name="kilometer" class="w-full border rounded px-3 py-2" placeholder="ูุซูุงู 58000" required>
        </div>

        <!-- ุฑูฺฏ -->
        <div>
          <label class="block mb-1">ุฑูฺฏ</label>
          <select name="color" class="w-full border rounded px-3 py-2" required>
            <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option>
            <option>ุณูุฏ</option>
            <option>ูุดฺฉ</option>
            <option>ููุฑูโุง</option>
            <option>ูุฑูุฒ</option>
            <option>ุฎุงฺฉุณุชุฑ</option>
            <option>ุจฺ</option>
            <option>ุขุจ</option>
            <option>ููููโุง</option>
            <option>ุณุจุฒ</option>
            <option>ุฒุฑุฏ</option>
            <option>ุจููุด</option>
          </select>
        </div>

        <!-- ฺฏุฑุจฺฉุณ -->
        <div>
          <label class="block mb-1">ฺฏุฑุจฺฉุณ</label>
          <select name="gearbox" class="w-full border rounded px-3 py-2" required>
            <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option>
            <option>ุฏูุฏูโุง</option>
            <option>ุงุชููุงุชฺฉ</option>
          </select>
        </div>

        <!-- ุณูุฎุช -->
        <div>
          <label class="block mb-1">ุณูุฎุช</label>
          <select name="fuel" class="w-full border rounded px-3 py-2" required>
            <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option>
            <option>ุจูุฒู</option>
            <option>ุฏูฺฏุงูู ุณูุฒ</option>
          </select>
        </div>

        <!-- ูุถุนุช ุจุฏูู -->
        <div>
          <label class="block mb-1">ูุถุนุช ุจุฏูู</label>
          <select name="body_status" class="w-full border rounded px-3 py-2" required>
            <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option>
            <option>ุณุงูู ุจุฏูู ุฎุท ู ุฎุด</option>
            <option>ุณุงูู ุจุง ุฎุท ู ุฎุด</option>
            <option>ฺฉ ูฺฉู ุฑูฺฏ</option>
            <option>ุฏู ูฺฉู ุฑูฺฏ</option>
            <option>ฺูุฏ ูฺฉู ุฑูฺฏ</option>
            <option>ุชุตุงุฏู</option>
          </select>
        </div>

        <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition">ูพุดโุจู ููุช</button>
      </form>

      <div id="result" class="mt-6 text-center text-lg font-semibold"></div>
    </div>
  </div>

  <script>
    const form = document.getElementById('carForm');
    const resultDiv = document.getElementById('result');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      resultDiv.textContent = "ุฏุฑ ุญุงู ุฏุฑุงูุช ูพุดโุจู...";

      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());

      data.zero_km = data.kilometer == 0 ? 1 : 0;
      data.km_per_year = Math.floor(data.kilometer / (1404 - data.year || 1));
      data.is_automatic = data.gearbox.includes("ุงุชููุงุชฺฉ") ? 1 : 0;

      try {
        const response = await fetch("https://web-production-3e601.up.railway.app/predict", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });

        const result = await response.json();
        if(result.success){
          resultDiv.textContent = `๐ฐ ููุช ูพุดโุจู ุดุฏู: ${result.formatted_price} ุชููุงู`;
        } else {
          resultDiv.textContent = `โ ุฎุทุง: ${result.errors?.join(', ') || result.message}`;
        }
      } catch (err) {
        resultDiv.textContent = `โ ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ`;
        console.error(err);
      }
    });
  </script>
</body>
</html>
